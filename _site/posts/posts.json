[
  {
    "path": "posts/2021-02-18-dataviz-makeover-2/",
    "title": "DataViz Makeover 2",
    "description": "A short description of the post.",
    "author": [
      {
        "name": "Bui Anh Hoang",
        "url": {}
      }
    ],
    "date": "2021-02-18",
    "categories": [],
    "contents": "\r\nCritiques and Suggestions\r\nOriginal Visualization\r\n\r\n\r\n\r\n#\r\nCritique\r\nSuggestion\r\n\r\nClarity\r\n\r\n1\r\nThe leading texts in the data visualization do not provide any adequate context for the reader to understand what the data visualization is about and the insights it is trying to convey\r\nClearly state the purpose of the data visualization with some short description\r\n2\r\nThe legend is unclear in that the values “2”, “3” and “4” by itself does not provide any explanation as to which color in the chart represent which answer. Not only that, “Vac_1” is also meaningless to users since it is only a code to refer to the actual question\r\nThe survey question should be clearly displayed in the data visualization, not necessarily above the legend\r\n3\r\nA 100% stacked bar chart is not a suitable visualization for this data since it can be difficult to compare the bars between countries\r\nUse a divergent stacked bar chart\r\n4\r\nThe bar chart on the right is trying to show the percentage of the “Strongly Agree” response to the survey question, which contains uncertainties since a survey does not represent the whole population, hence the chart needs to also visualize the uncertainty\r\nDisplay the 95% and 99% confidence level on the chart in order to visualize the uncertainty\r\n5\r\nThe left chart is sorting alphabetically while the right chart is sorting descendingly based on the proportion of “Strongly Agree” response. This can easily cause confusion without carefully inspecting the 2 Y-axis\r\nUse the same sort order for both charts\r\n\r\nAesthetic\r\n\r\n1\r\nThere are no coordination between the colors in the bar chart, giving the data visualization a messy look\r\nUse one shade of color to represent the positive or negative sentiment and use gradient colors to show the different strengths of each sentiment\r\n2\r\nTypo in the word “vaccine”\r\nUse the correct word\r\n3\r\nCountry names should be capitalized and should not contain special characters\r\nProperly display the country names\r\nProposed Design\r\n\r\n\r\n\r\nSince the survey contains multiple questions, an Overview section on top of the data visualization can provide some quick insights about the result of the survey.\r\nThe responses for the survey are following a Likert scale, hence using a divergent stacked bar chart is suitable as it allows easy comparison of response proportion across rows. To take it a step further, with the NeutraL response not being very useful in showing the general sentiment regarding the survey question, the Neutral bar will be split in half and each half will be placed on the outside to allow the stronger sentiments to be in the middle. This makes it easier to compare the strong sentiments between countries. Whether to show the Neutral bar in the chart should also be toggle-able by the user.\r\nThe dot chart on the right side will be used to visualize the proportion of a response to a survey question. The filter on top will allow the read to switch between different responses, including combined response such as “Strongly Agree & Agree”. Additionally, the chart will also display the 95% and 99% confidence interval to visualize the uncertainties for each country and the user be able to toggle the confidence intervals on and off.\r\nSome readers may prefer to combine similar responses with each other to convert the data into only three levels of sentiments. However, being able to see the proportion of the responses in details can be beneficial in some use cases e.g. comparing the responses between two countries with similar overall positive sentiments. As such, the data visualization should allow users to toggle the Granularity of the chart in order to choose between a simplified view or a detailed view.\r\nSome additional filters such as Age and Gender will be placed on the side the data visualization to allow users to filter out the respondents to a specific demographic.\r\nHow-to Guide\r\nData Cleaning\r\nThe dataset consists of 30 CSV files, one for each country. However, only 15 countries have the response for the questions that we want to visualize. For convenience, the dataset was combined and extracted using Jupyter Notebook with the following Python code:\r\nimport pandas as pd\r\nimport glob\r\nimport os\r\n\r\npath = r'<Path to folder containing csv files>' # use your path\r\nall_files = glob.glob(os.path.join(path, \"*.csv\"))\r\n\r\ndf = pd.concat((pd.read_csv(f).assign(\r\n        filename = os.path.basename(f)) for f in all_files), ignore_index=True)\r\ncolumns = ['filename', 'age', 'gender', 'weight', 'employment_status', 'household_size',\r\n          'household_children', 'endtime', 'state', 'vac_1', 'vac2_1','vac2_2',\r\n          'vac2_3', 'vac2_6', 'vac_3']\r\n\r\ndf[df['vac_1'].notnull()][columns].to_csv('preped_data.csv')\r\nThe final data file can be Download Here\r\nOpen Tableau and connect to the data file from the previous section.\r\nRight-click on the Filename column and select Split\r\nHide the Filename column and rename the new Filename - Split 1 column to Country\r\nRight-click on the Country column and select Alias then set the country names to the proper format with capitalization.\r\nRename the following columns to their respective question:\r\nvac_1 - I am worried about getting COVID19\r\nvac2_1 - I am worried about potential side effects of a COVID19 vaccine\r\nvac2_2 - I believe government health authorities in my country will provide me with an effective COVID19 vaccine\r\nvac2_3 - If a Covid-19 vaccine becomes available to me a year from now, I definitely intend to get it\r\nvac2_6 - If a Covid-19 vaccine were made available to me this week, I would definitely get it\r\nvac_3 - If I do not get a COVID19 vaccine when it is available, I will regret it\r\nSelect all the question columns in step 5 and Pivot them\r\nRename the pivoted columns to Question and Answer\r\nResult:\r\n\r\n\r\n\r\nDivergent Stacked Bar\r\nGo to Sheet1 and rename the sheet to Likert.\r\nCreate the following Parameters:\r\nGranularity:\r\n\r\n\r\n\r\nNeutral Response:\r\n\r\n\r\n\r\nSort By:\r\n\r\n\r\n\r\nCreate the following Calculated Fields:\r\nResponse:\r\nIF [Granularity] = \"Coarse\" THEN \r\n    IF [Answer] = \"1 - Strongly agree\" OR [Answer] = \"2\"\r\n    THEN \"Agree \"\r\n    ELSEIF [Answer] = \"3\"\r\n    THEN \"Neutral\"\r\n    ELSE \"Disagree \"\r\n    END\r\nELSE\r\n    IF [Answer] = \"1 - Strongly agree\"\r\n    THEN \"Strongly Agree\"\r\n    ELSEIF [Answer] = \"2\"\r\n    THEN \"Agree\"\r\n    ELSEIF [Answer] = \"3\"\r\n    THEN \"Neutral\"\r\n    ELSEIF [Answer] = \"4\"\r\n    THEN \"Disagree\"\r\n    ELSE \"Strongly Disagree\"\r\n    END\r\nEND\r\nCount Agree:\r\nIF [Response] = \"Agree\" OR [Response] = \"Strongly Agree\" OR [Response] = \"Agree \"\r\nTHEN 1\r\nELSE 0\r\nEND\r\nCount Disagree:\r\nIF [Response] = \"Disagree\" OR [Response] = \"Strongly Disagree\" OR [Response] = \"Disagree \"\r\nTHEN 1\r\nELSE 0\r\nEND\r\nCount Negative:\r\nIF [Response] = \"Disagree\" OR [Response] = \"Strongly Disagree\" OR [Response] = \"Disagree \"\r\nTHEN -1\r\nELSEIF [Response] = \"Neutral\" AND [Neutral Response] = TRUE\r\nTHEN -0.5\r\nELSE 0\r\nEND\r\nCount Positive:\r\nIF [Response] = \"Agree\" OR [Response] = \"Strongly Agree\" OR [Response] = \"Agree \"\r\nTHEN 1\r\nELSEIF [Response] = \"Neutral\" AND [Neutral Response] = TRUE\r\nTHEN 0.5\r\nELSE 0\r\nEND\r\nLabel Negative:\r\nIF  AVG([Neutral Check])*[Percentage Negative] = 0 THEN NULL\r\nELSE [Percentage Negative]\r\nEND\r\nLabel Positive:\r\nIF  AVG([Neutral Check])*[Percentage Positive] = 0 THEN NULL\r\nELSE [Percentage Positive]\r\nEND\r\nNeutral Check:\r\nIF [Response] = \"Neutral\" THEN 0\r\nELSE 1\r\nEND\r\nNumber of Records:\r\n1\r\nPercentage Agree:\r\nSUM([Count Agree])/SUM({Exclude [Response]:SUM([Number of Records])})\r\nPercentage Disagree:\r\n-SUM([Count Disagree])/SUM({Exclude [Response]:SUM([Number of Records])})\r\nPercentage Negative:\r\nSUM([Count Negative])/SUM({Exclude [Response]:SUM([Number of Records])})\r\nPercentage Positive:\r\nSUM([Count Positive])/SUM({Exclude [Response]:SUM([Number of Records])})\r\nSort By Field:\r\nCASE [Sort By]\r\n    WHEN 'Agree' THEN SUM([Count Agree])/SUM({Exclude [Response]:SUM([Number of Records])})\r\n    WHEN 'Disagree' THEN SUM([Count Disagree])/SUM({Exclude [Response]:SUM([Number of Records])})\r\n    WHEN 'Agree (Including Neutral)' THEN SUM([Count Positive])/SUM({Exclude [Response]:SUM([Number of Records])})\r\n    WHEN 'Disagree (Including Neutral)' THEN -SUM([Count Negative])/SUM({Exclude [Response]:SUM([Number of Records])})\r\nEND\r\nTotal Count:\r\nTOTAL(SUM([Number of Records]))\r\nPut Answer in the Filter card and uncheck the Null value.\r\nPut Country in the Rows card the Percentage Negative and Percentage Positive in the Columns card\r\nRight-click on the Percentage Positive pill and select Dual Axis\r\n\r\n\r\n\r\nRight-click on either of the X-axis and select Synchronize Axis.\r\nIn the Marks card, change the type of All to Bar.\r\nDrag-and-drop Response into the Color tool in the Marks card\r\n\r\n\r\n\r\nIn the filter shelf, drag-and-drop to reorder Neutral to the top of the list and set the colors of Response as follow\r\n\r\n\r\n\r\nRight-click on the Granularity, Neutral Response and Sort By parameter and select Show Parameter for each of them\r\nSet Granularity to Detailed\r\nOrder and set the color of Response again\r\n\r\n\r\n\r\nRight-click on the Percentage Negative Axis and select Edit Axis\r\nChange the Range to Fixed and set Fixed start to -0.7 and Fixed end to 1\r\nRemove the Title of the axis\r\n\r\n\r\n\r\nHide the top axis (Percentage Positive)\r\nRight-click on the bottom axis and select Format\r\nUnder the Scale section, change numbers to Percentage with 0 decimal places, then click on Custom and set the value as follow\r\n\r\n\r\n\r\nDrag-and-drop Label Negative to Label in the Marks > AGG(Percentage Negative) card\r\n\r\n\r\n\r\nRight-click on the Label Negative pill and select format.\r\nSet the format to Percentage similar to step 19, but this time set decimal places to 1 and the customer format to 0.0%;0.0%\r\nDrag-and-drop Label Positive to Label in the Marks > AGG(Percentage Positive) card\r\nSet the format of Label Positive similar to the format of Label Negative in step 22\r\nRight-click on the Country pill in the Rows card and select Sort\r\nSet Sort By to Field, Sort Order to Descending and Field Name to Sort By Field\r\n\r\n\r\n\r\nLegends\r\nCreate the following Calculated Fields:\r\nLegend Coarse Agree:\r\nIF [Granularity] = \"Coarse\" THEN \"Agree\"\r\nELSE \"Strongly Agree\"\r\nEND\r\nLegend Coarse Disagree:\r\nIF [Granularity] = \"Coarse\" THEN \"Disagree\"\r\nELSE \"Strongly Disagree\"\r\nEND\r\nLegend Detailed Agree:\r\nIIF([Granularity]=\"Detailed\",\"Agree\",\"\")\r\nLegend Detailed Disagree:\r\nIIF([Granularity]=\"Detailed\",\"Disagree\",\"\")\r\nLegend Neutral:\r\nIF [Neutral Response] THEN \"Neutral\"\r\nELSE \"\"\r\nEND\r\nLegend Pipe Symbol:\r\nIIF([Granularity]=\"Detailed\",\"|\",\"\")\r\nDrag-and-drop all 6 Legend fields into the Detail of the Marks > All card\r\n\r\n\r\n\r\nSet the title of the sheet as follow and change the title shading to yellow:\r\n\r\n\r\n\r\nOn the Toolbar, select Format > Lines\r\nSet Column Grid Lines to None and Row Grid Lines to a grey line\r\n\r\n\r\n\r\nThe divergent stacked bar chart is now complete. We will revisit it later to configure the Tooltip\r\n\r\n\r\n\r\nConfidence Interval\r\nCreate a new worksheet and name it Confidence Interval\r\nCreate and show following Parameters:\r\nResponse Selector:\r\n\r\n\r\n\r\nShow:\r\n\r\n\r\n\r\nCreate the following Calculated Fields:\r\nCount Response:\r\nIF [Response Selector] = \"6\" THEN\r\n    IF [Answer] = \"1 - Strongly agree\" OR [Answer] = \"2\"\r\n    THEN 1\r\n    ELSE 0\r\n    END\r\nELSEIF  [Response Selector] = \"7\" THEN\r\n    IF [Answer] != \"1 - Strongly agree\" AND [Answer] != \"2\" AND [Answer] != \"3\"\r\n    THEN 1\r\n    ELSE 0\r\n    END\r\nELSEIF [Answer] = [Response Selector] Then 1\r\nELSE 0\r\nEND\r\nResponse CI Lower 95%:\r\nIF [Show]=\"2\" or [Show]=\"4\" THEN [Selected Response]-[Response SE]*[Z_95%] END\r\nResponse CI Lower 99%:\r\nIF [Show]=\"3\" or [Show]=\"4\" THEN [Selected Response]-[Response SE]*[Z_99%] END\r\nResponse CI Upper 95%:\r\nIF [Show]=\"2\" or [Show]=\"4\" THEN [Selected Response]+[Response SE]*[Z_95%] END\r\nResponse CI Upper 99%:\r\nIF [Show]=\"3\" or [Show]=\"4\" THEN [Selected Response]+[Response SE]*[Z_99%] END\r\nResponse SE:\r\nSQRT(([Selected Response]*(1-[Selected Response]))/SUM([Number of Records]))\r\nSelected Response:\r\nSUM([Count Response])/SUM([Number of Records])\r\nZ_95%:\r\n1.959964\r\nZ_99%:\r\n2.575829\r\nPut Answer in the Filter card and remove the Null value\r\nPlace Country in the Rows card and Selected Response in the Columns card\r\nPlace Response CI Lower 99% to the Columns card and set it to Dual Axis\r\nDrag Response CI Upper 99% to the Response CI Lower 99% until a green equal icon appears, then drop\r\n\r\n\r\n\r\nDrag-and-drop Response Lower 95% to the Measure Values card\r\nDrag-and-drop Response Upper 95% to the Measure Values card. Final result should be in this specific order:\r\n\r\n\r\n\r\nRight-click on Selected Response and select Synchronize Axis\r\nSet the Show parameter to Actual and 95%/99% if it has not been set\r\nIn the Marks > Measure Values card, change the type to Line\r\nHold Ctrl, drag-and-drop the Measure Names pills to the Path box\r\n\r\n\r\n\r\nSet the color of Measure Names as follow\r\n\r\n\r\n\r\nSwap the order of Measure Values and Selected Response in the Column Card\r\nHide the top X-axis\r\nRight-click on the bottom axis and select Edit Axis\r\nRemove the Title and uncheck Include zero\r\n\r\n\r\n\r\nChange the format of the X-axis to Percentage with 0 decimal place\r\nSet the title and change it’s shading to yellow\r\n\r\n\r\n\r\nThe visualization for uncertainties is now completed\r\n\r\n\r\n\r\nPie/donut charts\r\nTooltip\r\nInsights\r\n\r\n\r\n\r\n",
    "preview": "posts/2021-02-18-dataviz-makeover-2/images/Original DataViz.PNG",
    "last_modified": "2021-02-19T02:49:01+08:00",
    "input_file": "dataviz-makeover-2.utf8.md"
  },
  {
    "path": "posts/2021-01-27-dataviz-makeover-1/",
    "title": "DataViz Makeover 1",
    "description": "A makeover of the resident labour force data visualization from the Ministry of Manpower's Labour Force In Singpapore 2019 Report",
    "author": [
      {
        "name": "Bui Anh Hoang",
        "url": {}
      }
    ],
    "date": "2021-01-27",
    "categories": [],
    "contents": "\r\n\r\nContents\r\nCritiques and Suggestions\r\nProposed Design\r\nHow-to GuideButterfly Chart\r\nStacked Bar Chart\r\n\r\nFinal DashboardInsights\r\n\r\n\r\n\r\nbody {\r\ntext-align: justify}\r\nCritiques and Suggestions\r\nOriginal Visualization\r\n\r\n\r\n\r\n#\r\nCritique\r\nSuggestion\r\n\r\nClarity_\r\n\r\n1\r\nThe text is comparing the sum of share of resident labour force of multiple age groups between 2009 and 2019 but those numbers are not highlighted and requires the reader to do the calculations using the data from the table\r\nUse a separate chart for the comparison between 2 years\r\n2\r\nThe median age lines are using the table’s header as a continuous axis while the line chart is using it as a categorical axis, hence the intersections of the lines are incorrectly representing the labour force participation rate of age 41 and 44 in 2009 and 2019, respectively. The text is also not clear if it’s referring to the median age of the labour force or the median age of the population\r\nThe median lines should be removed. Some simple annotation would suffice to state the median age in 2009 and 2019\r\n3\r\nTitle does not represent the message the data visualization tries to convey\r\nRewrite the title to better describe the data visualization\r\n4\r\nThe line graph does not have a Y-axis\r\nAdd a Y-axis and clearly label the ticks with percentage\r\n\r\nAesthetic\r\n\r\n1\r\nThe background color being grey serves no purpose and makes the 2 colors in the visualization less contrasting. These choice of colors would also be indistinguishable if the report is not color printed\r\nUse a white background with a colored border around the visualization if needed\r\n2\r\nTable headers are used as the x-axis of the table which makes the line graph on top looks out of place\r\nUse a separate chart instead\r\n3\r\n“70&Over” is too long for the table cell, making it look crammed\r\n“70+” would be more space efficient while still able to convey the meaning\r\nProposed Design\r\n\r\n\r\n\r\nHow-to Guide\r\nButterfly Chart\r\nCopy the data into a new Excel worksheet as the original file has a lot of formatting.\r\nOpen Tableau and connect to the data in the new Excel worksheet.\r\nHold Ctrl and click on the columns 2009 and 2019.\r\nRight-click on one of the selected columns and select Pivot.\r\n\r\n\r\n\r\nRename the pivoted columns to Year and Labour Force and change the data type of column Year column to Date.\r\n\r\n\r\n\r\nGo to Sheet1 and rename the sheet to 2009.\r\nDrag-and-drop Year and Labour Force to the Columns card and Age to the Rows card.\r\n\r\n\r\n\r\nRight-click on the Year pill to select Filter.\r\n\r\n\r\n\r\nUn-check 2019 from the list and select OK.\r\nRight-click on the Labour Force pill and select Quick Table Calculation > Percentage of Total.\r\n\r\n\r\n\r\nHold Ctrl, drag-and-drop the Labour Force pill from the Columns card to Color in the Marks card.\r\nIn the Marks card, click on Label and select Show marks labels.\r\n\r\n\r\n\r\nRight-click on the X-axis and select Edit Axis:\r\nIn the Range section, select Fixed and set the start and end values to 0 and 0.175, respectively.\r\nIn the Scale section, select Reversed.\r\nSet the title of the axis to 2009.\r\n\r\n\r\n\r\nRight-click on the Age (Years) pill and un-check Show Header.\r\nRight-click on the Year pill and un-check Show Header.\r\n\r\n\r\n\r\nFrom the Toolbar, select Format > Lines:\r\n\r\n\r\n\r\nIn the Columns tab, set Grid Lines to None.\r\n\r\n\r\n\r\nSwitch to the Format Borders tool, under the Sheet tab.\r\nSet Row Divider Pane to None and Column Divider Pane to None.\r\n\r\n\r\n\r\nThe bar chart should looks as below\r\n\r\n\r\n\r\nDuplicate the 2009 sheet and rename it 2019.\r\nRight-click on the Year pill and select Edit Filter then un-check 2009 and check 2019.\r\nRight-click on the X-axis and select Edit Axis:\r\nUn-check Reversed.\r\nRename the axis’ title to 2019.\r\n\r\n\r\n\r\nCreate a new sheet and name it Year.\r\nFrom the Toolbar, select Analysis > Create Calculated Field:\r\n\r\n\r\n\r\nName the calculated field Placeholder for Age.\r\nEnter 0 as the formula.\r\n\r\n\r\n\r\nDrag-and-drop the Placeholder for Age field to the Columns card.\r\nDrag-and-drop the Age (Years) field to the Rows card.\r\n\r\n\r\n\r\nChange the Marks type to Text.\r\nDrag-and-drop the Age (Years) field to Text in the Marks card.\r\n\r\n\r\n\r\nRight-click on both the X-axis and Y-axis and un-check Show Header to hide the axis.\r\nRemove the sheet title.\r\nFrom the Toolbar, select Format > Lines:\r\nOn the Sheet tab, set Axis Rulers to None.\r\nOn the Sheet tab, set Zero Lines to None.\r\nOn the Columns tab, set Grid Lines to None.\r\n\r\n\r\n\r\nReduce the width of the “chart” as much as possible.\r\n\r\n\r\n\r\nCreate a new Dashboard.\r\nArrange the 3 previous created sheets in the Dashboard to achieve the Butterfly Chart.\r\n\r\n\r\n\r\nStacked Bar Chart\r\nCreate a new Sheet called Comparison.\r\nIn the Data pane, right-click on Age (Years) and select Create > Group:\r\n\r\n\r\n\r\nSet the Field Name to Age Group.\r\nUse Shift to select and group all the age groups from 15 to 24 into a group named 15 - 24.\r\nGroup all the age groups from 25 to 54 into a group named 25 - 54.\r\nGroup all rest of the age groups into a group named 55 and over.\r\n\r\n\r\n\r\nDrag-and-drop Year into the Rows card and Labour Force into the Columns card.\r\nRight-click on the Labour Force pill and select Quick Table Calculation > Percentage of Total.\r\n\r\n\r\n\r\nRight-click on the Labour Force pill and select Compute Using > Table (across).\r\nChange the Marks type to Bar.\r\nDrag-and-drop the Age Group group into Color in the Marks card.\r\nDrag-and-drop the Age Group group into Detail in the Marks card.\r\n\r\n\r\n\r\nRight-click on the Age Group pill in the Marks card and select Sort. Choose Descending.\r\nSet the desired colors for the Age Group.\r\n\r\n\r\n\r\nRemove the title and field labels of Year.\r\nArrange the new bar chart into the final dashboard.\r\nFinally, add observations and annotation. Voila!\r\nFinal Dashboard\r\nLink to Tableau Public\r\n\r\n\r\n\r\nInsights\r\nSingapore seems to have an aging workforce as the distribution of the labour force is leaning more towards the older age group in 2019 compare to 2009.\r\nThe distribution of all the age groups from 60 and above has the largest increase in 2019 relative to 2009, indicating that elder people may still have to work instead of retiring.\r\nThe age group which held the largest share in 2009 is 35-39, however, by 2019, the age group with the biggest share has shifted to age group 45-49.\r\n\r\n\r\n\r\n",
    "preview": "posts/2021-01-27-dataviz-makeover-1/images/Original DataViz.PNG",
    "last_modified": "2021-01-28T18:36:49+08:00",
    "input_file": "dataviz-makerover-1.utf8.md"
  },
  {
    "path": "posts/welcome/",
    "title": "Welcome to Awesome",
    "description": "Welcome to our new blog, Awesome. We hope you enjoy \nreading what we have to say!",
    "author": [
      {
        "name": "Nora Jones",
        "url": "https://example.com/norajones"
      }
    ],
    "date": "2021-01-04",
    "categories": [],
    "contents": "\r\n\r\n\r\n\r\n",
    "preview": {},
    "last_modified": "2021-01-04T20:18:44+08:00",
    "input_file": {}
  }
]
